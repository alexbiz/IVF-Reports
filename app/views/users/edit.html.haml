.grid_1.alpha
  .profile_nav
    %ul
      %li.active.section#personal
        %span.icon u
        Personal Info
      %li.section#account
        %span.icon ⚙
        Account Info 
      %li.active_section
        %span.icon ←
.grid_11.omega
  .profile.round
    #personal_section
      .profile_top
        .name
          %h1= "Edit Profile - #{@user.name}"
          %span.user_subtitle="Member Since #{@user.created_at.strftime("%B %d, %Y")}"
        .gravatar.box_shadow
          = gravatar_for @user, {:size => 200}
          .personal_info
            -if current_user?(@user)
              %ul
                %li
                  %span.field="Change Image @ "
                  %span.data="<a href='http://gravatar.com/emails' target='_blank'>Gravatar.com</a>".html_safe
        .edit_profile
          =link_to current_user, :class => "edit button ivfblue" do
            %span.icon E
            View Profile
      .profile_body
        =form_for @user, :as => :personal_info, :url => user_path(@user), :method => :put, :remote => true do |f|
          %ul
            %li
              %span.field=f.label :first_name
              %span.data=f.text_field :first_name
            %li
              %span.field=f.label :last_name
              %span.data=f.text_field :last_name
            %li
              %span.field=f.label :name, 'Username'
              %span.data=f.text_field :name
            %li
              %span.field=f.label :gender
              -gender_select = options_for_select([['-'],['Male','male'],['Female','female']], @user.gender)
              %span.data=f.select(:gender, gender_select)
            %li
              %span.field=f.label :zip_code
              %span.data=f.text_field :zip_code
            %li
              %span.field=f.label :birthday
              %span.data=f.date_select :birthday, {:start_year => Time.now.year, :end_year => 1900, :use_short_month => true, :order => [:month, :day, :year], :prompt => {:month => 'Month', :day => 'Day', :year => 'Year'}}
            %li
              %span.field=f.label :ethnicity
              -ethnicity_select = options_for_select([['-'],['Caucasian','caucasian'],['Ease Asian','east_asian'],['South Asian','south_asian'],['Arabic','arabic'],['African','african'],['Hispanic','hispanic'],['Native American','native_american'],['Other','other']], @user.ethnicity)
              %span.data=f.select(:ethnicity, ethnicity_select)
            %li
              %span.field=f.label :phone, 'Phone # (Clinic Contact)'
              %span.data=f.text_field :phone, :class => "phone_number"
            %li.about_me
              %span.field=f.label :about_me
              %span.data=f.text_area :about_me
            %li.update_button
              =f.submit "Update.", :class => "button ivfblue"
            %li
              .update_results.hidden.round.white
    #account_section.hidden
      -if current_user?(@user)
        .profile_top
          .name
            %h1 Update Account Information
            %span.user_subtitle="Edit your email and password here."
          .edit_profile
            =link_to current_user, :class => "edit button ivfblue" do
              %span.icon E
              View Profile
        .profile_body
          =form_for @user, :as => :account_info, :url => user_path(@user), :method => :put, :remote => true do |f|
            %ul
              %li
                %span.field=f.label :email
                %span.data=f.email_field :email
              %li
                %span.field=f.label :password
                %span.data=f.password_field :password
              %li
                %span.field=f.label :password_confirmation
                %span.data=f.password_field :password_confirmation
              %li.update_button
                =f.submit "Update.", :class => "button ivfblue"
              %li
                .update_results.hidden.round.white

:javascript
  $(document).ready(function(){
    $('input.phone_number').mask('(999) 999-9999');  
    $('div.profile_nav ul li.section').click(function(){
      $(this).siblings().removeClass('active');
      $(this).addClass('active');
      var section_id = $(this).attr('id');
      if(section_id=="personal"){
        $('li.active_section').animate({top:'0px'},500);
      }
      else if(section_id=="account"){
        $('li.active_section').animate({top:'80px'},500);      
      }
      var show_section = "div#" + section_id + "_section";
      $(show_section).siblings().fadeOut(250, function(){
        setTimeout(function(){
          $(show_section).fadeIn(250);
        }, 250);
      });
    });
  });